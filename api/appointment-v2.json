{"openapi":"3.0.1","info":{"title":"Appointment","version":"2.1.0"},"tags":[{"name":"SearchTimeSlot"},{"name":"CreateAppointment"},{"name":"UpdateAppointment"},{"name":"DeleteAppointment"},{"name":"SearchAppointment"},{"name":"AppointmentConfirmation"}],"paths":{"/searchTimeSlot":{"get":{"tags":["SearchTimeSlot"],"summary":"Retrive Search Time Slot","operationId":"Retrive Search Time Slot","parameters":[{"name":"addressId","in":"query","description":"ID do endereço","required":true,"schema":{"type":"integer","format":"int64","example":17713}},{"name":"subscriberId","in":"query","description":"Identificador único da instação do cliente. <br>Parametro com preenchimento obrigatório para todos os agendamento de Ordens com tipo diferente de Instalação.","required":false,"schema":{"type":"string","maxLength":30,"example":"VTAL001"}},{"name":"associatedDocument","in":"query","description":"Documento associado utilizado na criação da ordem de agendamento","required":true,"schema":{"type":"string","maxLength":30,"example":"VTT001"}},{"name":"startDate","in":"query","description":"Data de inicio para o periodo de pesquisa de slots ('Intervalo entre startDate e finishDate deve ser de no máximo 14 dias')","required":true,"schema":{"type":"string","format":"date-time","example":"2021-05-21T13:00:00"}},{"name":"finishDate","in":"query","description":"Data de final para o periodo de pesquisa de slots ('Intervalo entre startDate e finishDate deve ser de no máximo 14 dias')","required":true,"schema":{"type":"string","format":"date-time","example":"2021-06-04T13:00:00"}},{"name":"orderType","in":"query","description":"Tipo da Ordem a ser executada <br> - Instalação <br> - Retirada <br> - RemanejamentoPonto <br> - ChamadoTecnico <br>","required":true,"schema":{"type":"string","enum":["Instalacao","Retirada","RemanejamentoPonto","ChamadoTecnico"]}},{"name":"addressChangeFlag","in":"query","description":"Flag indicadora de Mudança de endereço em uma ordem de instalação (preenchimento permitido apenas para agendamentos de ordens do tipo instalação - orderType=Instalacao)","required":false,"schema":{"type":"boolean","default":false,"example":true}},{"name":"productType","in":"query","description":"Tipo do produto a ser considerado para o tipo de ordem a ser executada <br> - Banda Larga <br>","required":true,"style":"form","explode":false,"schema":{"type":"array","items":{"type":"string","maxLength":25,"enum":["Banda Larga"]},"example":["Banda Larga"]}},{"name":"priorityFlag","in":"query","description":"Flag indicadora de agendamento prioritário (Preenchimento permitido apenas para orderType=Instalacao ou orderType=ChamadoTecnico)<br><b>*** APENAS PARA CONTRATOS COBERTOS COM ESTA FUNCIONALIDADE","required":false,"schema":{"type":"boolean","default":false,"example":true}},{"name":"priorityReason","in":"query","description":"Motivo da solicitação de priorização do agendamento (Preenchimento obrigatório para quando \"priorityFlag\"= true)","required":false,"schema":{"type":"string","maxLength":80,"example":"Cliente Diamond"}}],"responses":{"200":{"description":"success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/searchTimeSlotResponse"},"examples":{"return sucess with slots":{"value":{"control":{"type":"S","code":200,"message":"OK"},"slots":[{"id":"8c2c93c7-4621-4830-b384-0d12bb33eedf","startDate":"2021-05-30T08:00:00","finishDate":"2021-05-30T12:00:00","expireIn":300},{"id":"bff13821-73c3-42cc-9327-b05c7df5a67f","startDate":"2021-05-30T13:00:00","finishDate":"2021-05-30T18:00:00","expireIn":300},{"id":"6cbace1a-7eda-4093-9619-09e571e742b0","startDate":"2021-05-31T08:00:00","finishDate":"2021-05-31T12:00:00","expireIn":300},{"id":"0b78aee7-2e4f-4c0a-852c-5a4845564aff","startDate":"2021-05-31T13:00:00","finishDate":"2021-05-31T18:00:00","expireIn":300}]}},"return sucess without slots":{"value":{"control":{"type":"S","code":200,"message":"OK"},"slots":[]}}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"406":{"$ref":"#/components/responses/NotAcceptable"},"412":{"$ref":"#/components/responses/PreconditionFailed"},"429":{"$ref":"#/components/responses/TooManyRequests"},"500":{"$ref":"#/components/responses/ServerError"},"503":{"$ref":"#/components/responses/Unavailable"},"504":{"$ref":"#/components/responses/Timeout"}}}},"/appointment":{"post":{"tags":["CreateAppointment"],"summary":"Post Appointment","operationId":"Post Appointment","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/createAppointmentRequest"},"example":{"appointment":{"slot":{"id":"bff13821-73c3-42cc-9327-b05c7df5a67f"},"reason":"Agendamento para Instalação de Fibra"}}}}},"responses":{"201":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/createAppointmentResponse"},"example":{"order":{"type":"Instalacao","associatedDocument":"VTT001","addressChange":{"flag":true}},"customer":{"subscriberId":"VTAL001"},"appointment":{"id":"SA-562403","startDate":"2021-05-30T13:00:00","finishDate":"2021-05-30T18:00:00","priority":{"flag":true,"reason":"Cliente Diamond"}},"address":{"id":17713},"products":{"product":[{"type":"Banda Larga"}]},"control":{"type":"S","code":201,"message":"Created"}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFoundSlot"},"406":{"$ref":"#/components/responses/NotAcceptable"},"412":{"$ref":"#/components/responses/PreconditionFailed"},"423":{"$ref":"#/components/responses/Locked"},"429":{"$ref":"#/components/responses/TooManyRequests"},"500":{"$ref":"#/components/responses/ServerError"},"503":{"$ref":"#/components/responses/Unavailable"},"504":{"$ref":"#/components/responses/Timeout"}}}},"/appointment/{appointmentId}":{"get":{"tags":["SearchAppointment"],"summary":"Retrieve Appointment","operationId":"Retrieve Appointment","parameters":[{"name":"appointmentId","in":"path","description":"identificador do agendamento a ser consultado","required":true,"schema":{"type":"number","maxLength":15,"example":"SA-562403"}}],"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/appointmentResponse"},"example":{"control":{"type":"S","code":200,"message":"Ok"},"appointments":{"id":"SA-562403","lifeCycleStatus":"Não atribuído","occurrences":[{"creationDateTime":"2021-12-07T12:17:20","startDate":"2021-10-09T13:00:00","finishDate":"2021-10-09T18:00:00","reason":"Teste Vtal CW","reasonDetail":"Teste Vtal CW"}]}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"406":{"$ref":"#/components/responses/NotAcceptable"},"412":{"$ref":"#/components/responses/PreconditionFailed"},"429":{"$ref":"#/components/responses/TooManyRequests"},"500":{"$ref":"#/components/responses/ServerError"},"503":{"$ref":"#/components/responses/Unavailable"},"504":{"$ref":"#/components/responses/Timeout"}}},"patch":{"tags":["UpdateAppointment"],"summary":"Patch Appointment","operationId":"Patch Appointment","parameters":[{"name":"appointmentId","in":"path","description":"identificador do agendamento a ser atualizado","required":true,"schema":{"type":"string","maxLength":15,"example":"SA-562403"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/updateAppointmentRequest"},"example":{"appointment":{"slot":{"id":"bff13821-73c3-42cc-9327-b05c7df5a67f"},"reason":"Agendamento para Instalação de Fibra"}}}}},"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/updateAppointmentResponse"},"example":{"order":{"type":"Instalacao","associatedDocument":"VTT001","addressChange":{"flag":true}},"customer":{"subscriberId":"VTAL001"},"appointment":{"id":"SA-562403","startDate":"2021-05-30T13:00:00","finishDate":"2021-05-30T18:00:00","priority":{"flag":true,"reason":"Cliente Diamond"}},"address":{"id":17713},"products":{"product":[{"type":"Banda Larga"}]},"control":{"type":"S","code":201,"message":"Created"}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFoundSlot"},"406":{"$ref":"#/components/responses/NotAcceptable"},"412":{"$ref":"#/components/responses/PreconditionFailed"},"423":{"$ref":"#/components/responses/Locked"},"429":{"$ref":"#/components/responses/TooManyRequests"},"500":{"$ref":"#/components/responses/ServerError"},"503":{"$ref":"#/components/responses/Unavailable"},"504":{"$ref":"#/components/responses/Timeout"}}},"delete":{"tags":["DeleteAppointment"],"summary":"Delete Appointment","operationId":"Delete Appointment","parameters":[{"name":"appointmentId","in":"path","description":"identificador do agendamento a ser cancelado","required":true,"example":"SA-562403","schema":{"type":"string","maxLength":15}},{"name":"appointmentReason","in":"query","description":"Descrição da causa do cancelamento","required":true,"schema":{"type":"string","maxLength":250,"example":"Cancelamento Checkout"}},{"name":"appointmentComments","in":"query","description":"Observação a ser colocada","required":false,"schema":{"type":"string","maxLength":250,"example":"Cancelamento Checkout"}}],"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"S","code":200,"message":"OK"}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"406":{"$ref":"#/components/responses/NotAcceptable"},"412":{"$ref":"#/components/responses/PreconditionFailed"},"423":{"$ref":"#/components/responses/Locked"},"429":{"$ref":"#/components/responses/TooManyRequests"},"500":{"$ref":"#/components/responses/ServerError"},"503":{"$ref":"#/components/responses/Unavailable"},"504":{"$ref":"#/components/responses/Timeout"}}}},"/appointmentConfirmation":{"post":{"tags":["AppointmentConfirmation"],"summary":"Appointment Confirmation","operationId":"Appointment Confirmation","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/appointmentConfirmationRequest"},"example":{"customer":{"subscriberId":"VTAL001"},"appointment":{"id":"SA-562403","confirmation":true}}}}},"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/appointmentConfirmationResponse"},"example":{"control":{"type":"S","code":200,"message":"OK"}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"406":{"$ref":"#/components/responses/NotAcceptable"},"412":{"$ref":"#/components/responses/PreconditionFailed"},"429":{"$ref":"#/components/responses/TooManyRequests"},"500":{"$ref":"#/components/responses/ServerError"},"503":{"$ref":"#/components/responses/Unavailable"},"504":{"$ref":"#/components/responses/Timeout"}}}}},"components":{"schemas":{"control":{"type":"object","properties":{"type":{"type":"string","description":"Tipo da mensagem de retorno. (S - Sucesso, T - Erro Técnico, E - Erro)","enum":["S","T","E"],"maxLength":1},"message":{"type":"string","description":"Descrição da mensagem de retorno.","maxLength":250},"code":{"type":"string","description":"Código de Retorno.","maxLength":3}}},"searchTimeSlotResponse":{"type":"object","properties":{"control":{"$ref":"#/components/schemas/control"},"slots":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","description":"identificador unico do slot","maxLength":36},"startDate":{"type":"string","description":"Data de início de agendamento","maxLength":25},"finishDate":{"type":"string","description":"Data de fim de agendamento","maxLength":25},"expireIn":{"type":"number","description":"Tempo de validade do slot em segundos","maxLength":4}}}}}},"appointmentResponse":{"type":"object","properties":{"control":{"$ref":"#/components/schemas/control"},"appointments":{"$ref":"#/components/schemas/appointmentsType"}}},"appointmentConfirmationRequest":{"type":"object","properties":{"customer":{"$ref":"#/components/schemas/customerType"},"appointment":{"type":"object","properties":{"id":{"type":"string","description":"identificador do agendamento a ter a visita tecnica confirmada","maxLength":15},"confirmation":{"type":"boolean","description":"flag indicadora da visita tecnica confirmada"}}}}},"appointmentConfirmationResponse":{"type":"object","properties":{"control":{"$ref":"#/components/schemas/control"}}},"createAppointmentRequest":{"type":"object","properties":{"appointment":{"type":"object","properties":{"slot":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"identificador do Slot escolhido entre os retornados na consulta de slot (searchTimeSlot)","maxLength":36}}},"reason":{"type":"string","description":"Motivo do agendamento","maxLength":250}}}}},"createAppointmentResponse":{"type":"object","properties":{"order":{"type":"object","properties":{"type":{"type":"string","description":"Tipo da Ordem a ser executada utlizado para consultar slots (SearchTimeSlot)","enum":["Instalação","Retirada","RemanejamentoPonto","ChamadoTecnico"]},"associatedDocument":{"type":"string","description":"Documento associado utlizado para consultar slots (SearchTimeSlot)","maxLength":30},"addressChange":{"type":"object","properties":{"flag":{"type":"boolean","description":"Flag indicadora de Mudança de endereço em uma ordem de instalação, utlizada para consultar slots (SearchTimeSlot)"}}}}},"customer":{"type":"object","properties":{"subscriberId":{"type":"string","description":"Identificador da instação do cliente utlizado para consultar slots (SearchTimeSlot)","maxLength":30}}},"appointment":{"type":"object","properties":{"id":{"type":"string","description":"identificador do agendamento criado","maxLength":30},"startDate":{"type":"string","description":"Data de inicio do slot selecionado na consulta do slots (SearchTimeSlot)","maxLength":25},"finishDate":{"type":"string","description":"Data de fim do slot selecionado na consulta do slots (SearchTimeSlot)","maxLength":25},"priority":{"type":"object","properties":{"flag":{"type":"boolean","description":"Flag indicadora de agendamento prioritário utlizada para consultar slots (SearchTimeSlot)","default":false},"reason":{"type":"string","description":"Motivo da priorização do agendamento utlizado para consultar slots (SearchTimeSlot)","maxLength":80}}}}},"address":{"type":"object","properties":{"id":{"type":"number","description":"Identificador único do endereço utlizado para consultar slots (SearchTimeSlot)","maxLength":20}}},"products":{"type":"object","properties":{"product":{"type":"array","items":{"required":["type"],"properties":{"type":{"type":"string","description":"Tipos do produtos utlizados para consultar slots (SearchTimeSlot) a ser considerado para o tipo de ordem a ser executada","enum":["Banda Larga"]}}}}}},"control":{"$ref":"#/components/schemas/control"}}},"updateAppointmentRequest":{"type":"object","properties":{"appointment":{"type":"object","properties":{"slot":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"identificador do Slot escolhido entre os retornados na consulta de slot (searchTimeSlot)","maxLength":36}}},"reason":{"type":"string","description":"Motivo do agendamento","maxLength":250}}}}},"updateAppointmentResponse":{"type":"object","properties":{"order":{"type":"object","properties":{"type":{"type":"string","description":"Tipo da Ordem a ser executada utlizado para consultar slots (SearchTimeSlot)","enum":["Instalação","Retirada","RemanejamentoPonto","ChamadoTecnico"]},"associatedDocument":{"type":"string","description":"Documento associado utlizado para consultar slots (SearchTimeSlot)","maxLength":30},"addressChange":{"type":"object","properties":{"flag":{"type":"boolean","description":"Flag indicadora de Mudança de endereço em uma ordem de instalação, utlizada para consultar slots (SearchTimeSlot)"}}}}},"customer":{"type":"object","properties":{"subscriberId":{"type":"string","description":"Identificador da instação do cliente utlizado para consultar slots (SearchTimeSlot)","maxLength":30}}},"appointment":{"type":"object","properties":{"id":{"type":"string","description":"identificador do agendamento criado","maxLength":30},"startDate":{"type":"string","description":"Data de inicio do slot selecionado na consulta do slots (SearchTimeSlot)","maxLength":25},"finishDate":{"type":"string","description":"Data de fim do slot selecionado na consulta do slots (SearchTimeSlot)","maxLength":25},"priority":{"type":"object","properties":{"flag":{"type":"boolean","description":"Flag indicadora de agendamento prioritário utlizada para consultar slots (SearchTimeSlot)","default":false},"reason":{"type":"string","description":"Motivo da priorização do agendamento utlizado para consultar slots (SearchTimeSlot)","maxLength":80}}}}},"address":{"type":"object","properties":{"id":{"type":"number","description":"Identificador único do endereço utlizado para consultar slots (SearchTimeSlot)","maxLength":20}}},"products":{"type":"object","properties":{"product":{"type":"array","items":{"required":["type"],"properties":{"type":{"type":"string","description":"Tipos do produtos utlizados para consultar slots (SearchTimeSlot) a ser considerado para o tipo de ordem a ser executada","enum":["Banda Larga"]}}}}}},"control":{"$ref":"#/components/schemas/control"}}},"customerType":{"properties":{"customer":{"type":"object","properties":{"subscriberId":{"type":"string","description":"Identificador da instação do cliente","maxLength":30}}}}},"appointmentsType":{"properties":{"id":{"type":"string","description":"identificador do agendamento a ser consultado","maxLength":15},"lifeCycleStatus":{"type":"string","description":"Status atual da ordem de agendamento","maxLength":64,"enum":["Não atribuído","Atribuído","Entregue ao técnico","Recebido","Em deslocamento","Em execução","Concluído com sucesso","Cancelado"]},"occurrences":{"type":"array","items":{"type":"object","properties":{"creationDateTime":{"type":"string","description":"Data de criação do agendamento","maxLength":25},"startDate":{"type":"string","description":"Início do agendamento","maxLength":25},"finishDate":{"type":"string","description":"Fim do agendamento","maxLength":25},"employeeID":{"type":"string","description":"Identificador do operador que realizou o agendamento","maxLength":8},"reason":{"type":"string","description":"Motivo do agendamento","maxLength":250},"reasonDetail":{"type":"string","description":"Detalhe do motivo do agendamento","maxLength":250},"comments":{"type":"string","description":"Comentários relativos ao agendamento","maxLength":250}}}}}}},"responses":{"BadRequest":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"E","code":400,"message":"Bad Request"}}}}},"Unauthorized":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"examples":{"Unauthorized":{"value":{"control":{"type":"E","code":401,"message":"Unauthorized"}}},"Priorização de agendamento não autorizado":{"value":{"control":{"type":"E","code":401,"message":"Priorização de agendamento não autorizado"}}}}}}},"Forbidden":{"description":"Forbidden - Scope Not Permitted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"examples":{"Invalid or expired credentials":{"value":{"control":{"type":"E","code":403,"message":"Forbidden - Scope Not Permitted"}}}}}}},"NotFoundSlot":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"examples":{"Identificador do Slot não encontrado ou expirado":{"value":{"control":{"type":"E","code":404,"message":"Identificador do Slot não encontrado ou expirado"}}},"Not Found":{"value":{"control":{"type":"E","code":404,"message":"Not Found"}}}}}}},"NotFound":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"examples":{"Not Found":{"value":{"control":{"type":"E","code":404,"message":"Not Found"}}}}}}},"NotAcceptable":{"description":"Not Acceptable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"E","code":406,"message":"Not Acceptable"}}}}},"PreconditionFailed":{"description":"Not Acceptable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"E","code":412,"message":"Precondition Failed"}}}}},"Locked":{"description":"Locked","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"E","code":423,"message":"Agendamento não pode ser alterado"}}}}},"TooManyRequests":{"description":"Too Many Requests - Exceeded Quota","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"E","code":429,"message":"Too Many Requests - Exceeded Quota"}}}}},"ServerError":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"T","code":500,"message":"Internal Server Error"}}}}},"Unavailable":{"description":"Service Unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"T","code":503,"message":"Service Unavailable"}}}}},"Timeout":{"description":"Gateway Timeout","content":{"application/json":{"schema":{"$ref":"#/components/schemas/control"},"example":{"control":{"type":"T","code":504,"message":"Gateway Timeout"}}}}}}}}